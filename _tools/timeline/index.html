<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project timeline</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap"
        rel="stylesheet">
</head>

<body>
    <h1> Timeline overview of this project</h1>

    <div id="countdown"></div>

    <canvas id="myCanvas" width="1200" height="860" style="border:1px solid #000000;"></canvas>

    <div class="log">
        <h2>Day 1 (17.11.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 2 (18.11.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 3 (19.11.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 4 (20.11.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 5 (21.11.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 6 (22.11.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 7 (23.11.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 8 (24.11.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 9 (25.11.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 10 (26.11.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 11 (27.11.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 12 (28.11.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 13 (29.11.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 14 (30.11.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 15 (1.12.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 16 (2.12.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 17 (3.12.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 18 (4.12.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 19 (5.12.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 20 (6.12.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 21 (7.12.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 22 (8.12.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 23 (9.12.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 24 (10.12.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 25 (11.12.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 26 (12.12.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 27 (13.12.2025)</h2>
        <p>Some reflection on the project</p>
    </div>

    <div class="log">
        <h2>Day 28 (14.12.2025)</h2>
        <p>Some reflection on the project</p>
    </div>
</body>

<script id="workList" type="application/json">
    {
        "work":[
            { "day": 17, "month": 11, "hours": 0 },
            { "day": 18, "month": 11, "hours": 0 },
            { "day": 19, "month": 11, "hours": 0 },
            { "day": 20, "month": 11, "hours": 0 },
            { "day": 21, "month": 11, "hours": 0 },
            { "day": 22, "month": 11, "hours": 0 },
            { "day": 23, "month": 11, "hours": 0 },
            { "day": 24, "month": 11, "hours": 0 },
            { "day": 25, "month": 11, "hours": 0 },
            { "day": 26, "month": 11, "hours": 0 },
            { "day": 27, "month": 11, "hours": 0 },
            { "day": 28, "month": 11, "hours": 0 },
            { "day": 29, "month": 11, "hours": 0 },
            { "day": 30, "month": 11, "hours": 0 },
            { "day": 1, "month": 12, "hours": 0 },
            { "day": 2, "month": 12, "hours": 0 },
            { "day": 3, "month": 12, "hours": 0 },
            { "day": 4, "month": 12, "hours": 0 },
            { "day": 5, "month": 12, "hours": 0 },
            { "day": 6, "month": 12, "hours": 0 },
            { "day": 7, "month": 12, "hours": 0 },
            { "day": 8, "month": 12, "hours": 0 },
            { "day": 9, "month": 12, "hours": 0 },
            { "day": 10, "month": 12, "hours": 0 },
            { "day": 11, "month": 12, "hours": 0 },
            { "day": 12, "month": 12, "hours": 0 },
            { "day": 13, "month": 12, "hours": 0 },
            { "day": 14, "month": 12, "hours": 0 }
        ]
    }
</script>

<script defer>
    const countdownDiv = document.getElementById("countdown");

    function timer() {
        const now = new Date();
        const currentMonth = now.getMonth();
        const currentDay = now.getDate();
        let daysLeft;
        if (currentMonth === 10) {
            daysLeft = 30 - currentDay + 14;
        }
        else if (currentDay <= 14) {
            daysLeft = 14 - currentDay;
        }
        else {
            countdownDiv.textContent = "Project is finished";
            return;
        }
        const currentHour = now.getHours();
        const hoursLeft = (daysLeft + 1) * 24 - currentHour;
        const currentMinute = now.getMinutes();
        const minutesLeft = hoursLeft * 60 - currentMinute;

        const days = Math.floor(minutesLeft / 1440);
        const hours = Math.floor(minutesLeft % 1440 / 60);
        const minutes = minutesLeft % 1440 % 60;

        countdownDiv.innerHTML = "Time left: <br>Days: " + days + "  <br>Hours: " + hours + "  <br>Minutes " + minutes;
    }
    setInterval(timer, 1000);

</script>

<script defer>
    const raw = document.getElementById("workList").textContent;
    const data = JSON.parse(raw);
    const work = data.work;
    const canvas = document.getElementById("myCanvas");
    const ctx = canvas.getContext("2d");

    const margin = 50;
    const hoursPlanned = 141;

    function drawAxes() {
        ctx.beginPath();
        ctx.moveTo(margin, margin);
        ctx.lineTo(margin, canvas.height - margin);
        ctx.lineTo(canvas.width - margin, canvas.height - margin);
        ctx.stroke();

        ctx.strokeStyle = "#ddd";
        ctx.lineWidth = 2;
        for (let i = 1; i <= 28; i++) {
            ctx.beginPath();
            ctx.moveTo(xPos(i), yPos(0));
            ctx.lineTo(xPos(i), yPos(140))
            ctx.stroke();
            ctx.fillText(i, xPos(i) - 25, yPos(0) + 20);
        }
        for (let i = 5; i <= 140; i += 5) {
            ctx.beginPath();
            ctx.moveTo(xPos(0), yPos(i));
            ctx.lineTo(xPos(28), yPos(i))
            ctx.stroke();
            ctx.fillText(i, xPos(0) - 30, yPos(i) + 2);
        }
    }

    function remainingHours(index) {
        let used = 0;
        for (let i = 0; i <= index; i++) {
            used += work[i].hours;
        }
        const remaining = hoursPlanned - used;
        return remaining < 0 ? 0 : remaining;
    }


    function xPos(index) {
        return margin + index * ((canvas.width - 2 * margin) / (work.length));
    }

    function yPos(hoursRemaining) {
        return margin + (hoursPlanned - hoursRemaining) * ((canvas.height - 2 * margin) / hoursPlanned);
    }



    function drawPoints() {
        ctx.fillStyle = "blue";
        ctx.beginPath();
        ctx.arc(xPos(0), yPos(hoursPlanned), 4, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(xPos(1), yPos(remainingHours(0)), 4, 0, Math.PI * 2);
        ctx.fill();
        for (let i = 1; i < work.length; i++) {
            ctx.beginPath();
            ctx.arc(xPos(i + 1), yPos(remainingHours(i)), 4, 0, Math.PI * 2);
            ctx.fill();
        }
    }


    function drawLine() {
        ctx.strokeStyle = "blue";
        ctx.lineWidth = 2;

        ctx.beginPath();

        // Start ALLTID på (dag 0, 141)
        ctx.moveTo(xPos(0), yPos(hoursPlanned));

        // Trekk ned til dag 1 basert på arbeid
        ctx.lineTo(xPos(1), yPos(remainingHours(0)));

        // Videre dager
        for (let i = 1; i < work.length; i++) {
            ctx.lineTo(xPos(i + 1), yPos(remainingHours(i)));
        }

        ctx.stroke();
    }



    function drawPlannedLine() {
        ctx.strokeStyle = "red";
        ctx.lineWidth = 2;
        ctx.beginPath();

        for (let i = 0; i < work.length + 1; i++) {
            const x = xPos(i);
            const plannedHours = hoursPlanned - (hoursPlanned * (i) / work.length);
            const y = yPos(plannedHours);
            if (i === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
        }

        ctx.stroke();
    }

    drawAxes();
    drawPlannedLine();
    drawLine();
    drawPoints();

</script>
<style>
    body {
        padding: 2rem;
    }

    canvas {
        border: 1px solid black;
    }

    #countdown {
        color: red;
        font-family: "Nunito", sans-serif;
        font-optical-sizing: auto;
        font-weight: 400;
        font-style: normal;
        font-size: 20px;
    }
</style>

</html>