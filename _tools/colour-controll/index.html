<!--                                    -->
<!--                                    -->
<!--                                    -->
<!-- =================================  -->
<!-- This was made for fun, and is not  -->
<!-- intended as part of my submisson!  -->
<!-- =================================  -->
<!--                                    -->
<!--                                    -->
<!--                                    -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Colour</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap"
        rel="stylesheet">
</head>

<body>

</body>
<script id="coloursList" type="application/json">
    {
        "colours": [
            {
                "id": "foreground",
                "name": "Black",
                "hex": "#000000",
                "role": "text",
                "description": "Primær tekstfarge",
                "theme": "light"
            },
            {
                "id": "background",
                "name": "White",
                "hex": "#ffffff",
                "role": "background",
                "description": "Hovedbakgrunn",
                "theme": "light"
            },
            {
                "id": "example1",
                "name": "Brand Blue",
                "hex": "#0066cc",
                "role": "CTA",
                "description": "Primær aksentfarge",
                "theme": "light"
            },
            {
                "id": "foreground",
                "name": "Black",
                "hex": "#000000",
                "role": "text",
                "description": "Primær tekstfarge",
                "theme": "light"
            },
            {
                "id": "background",
                "name": "White",
                "hex": "#ffffff",
                "role": "background",
                "description": "Hovedbakgrunn",
                "theme": "light"
            },
            {
                "id": "foreground",
                "name": "Black",
                "hex": "#000000",
                "role": "text",
                "description": "Primær tekstfarge",
                "theme": "light"
            },
            {
                "id": "background",
                "name": "White",
                "hex": "#ffffff",
                "role": "background",
                "description": "Hovedbakgrunn",
                "theme": "light"
            },
            {
                "id": "example1",
                "name": "Brand Blue",
                "hex": "#0066cc",
                "role": "CTA",
                "description": "Primær aksentfarge",
                "theme": "light"
            },
            {
                "id": "example1",
                "name": "Brand Blue",
                "hex": "#0066cc",
                "role": "CTA",
                "description": "Primær aksentfarge",
                "theme": "light"
            },
            {
                "id": "example2",
                "name": "Dark Blue",
                "hex": "#003366",
                "role": "CTA",
                "description": "Primær aksentfarge",
                "theme": "light"
            }
        ]
    }
</script>
<script defer>

    function hexadecimalToDecimal(hexadecimal) {
        const hexaNumbers = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f"]
        let pow = hexadecimal.length - 1;
        let num = 0;
        for (let i of hexadecimal) {
            const value = hexaNumbers.indexOf(i);
            num += value * (16 ** pow);
            pow--;
        }
        return num;
    }
    hexadecimalToDecimal("10")
    function hexToRGB(hex) {
        const r = hex.substring(1, 3)
        const rDec = hexadecimalToDecimal(r);
        const g = hex.substring(3, 5)
        const gDec = hexadecimalToDecimal(g);
        const b = hex.substring(5, 7)
        const bDec = hexadecimalToDecimal(b);
        return { r: rDec, g: gDec, b: bDec };
    }

    function linearValue(value) {
        if (value <= 0.03928) {
            return value / 12.92
        }
        return ((value + 0.055) / 1.055) ** 2.4;
    }

    function contrastRatio(r1 = 0, g1 = 0, b1 = 0, r2 = 255, g2 = 255, b2 = 255) {
        const norm_r1 = r1 / 255;
        const norm_g1 = g1 / 255;
        const norm_b1 = b1 / 255;
        const norm_r2 = r2 / 255;
        const norm_g2 = g2 / 255;
        const norm_b2 = b2 / 255;

        const R_1 = linearValue(norm_r1);
        const G_1 = linearValue(norm_g1);
        const B_1 = linearValue(norm_b1);
        const R_2 = linearValue(norm_r2);
        const G_2 = linearValue(norm_g2);
        const B_2 = linearValue(norm_b2);

        const L1 = 0.2126 * R_1 + 0.7152 * G_1 + 0.0722 * B_1;
        const L2 = 0.2126 * R_2 + 0.7152 * G_2 + 0.0722 * B_2;

        let contrastNum = 0;
        if (L1 < L2) {
            contrastNum = (L2 + 0.05) / (L1 + 0.05);
        }
        else {
            contrastNum = (L1 + 0.05) / (L2 + 0.05);
        }
        contrastNum = Math.round(contrastNum * 100) / 100;
        if (contrastNum < 3) {
            return `${contrastNum}:1<br>not compliant`;
        }
        else if (contrastNum < 4.5) {
            return `${contrastNum}:1<br>AA for large text`;
        }
        else if (contrastNum < 7) {
            return `${contrastNum}:1<br>AA text<br>AAA for large text`;
        }
        else return `${contrastNum}:1<br>AAA`;
    }

    const raw = document.getElementById("coloursList").textContent;
    const data = JSON.parse(raw);

    const body = document.querySelector("body");

    for (let i of data.colours) {
        const colourCard = document.createElement("div");
        colourCard.classList.add("colour-card");

        const info = document.createElement("div");
        info.classList.add("info");

        const space = document.createElement("div");
        space.classList.add("colour-space");

        const description = document.createElement("div");
        description.classList.add("description");
        const descText = document.createElement("p");
        descText.innerText = i["description"];
        description.appendChild(descText);

        const colour = document.createElement("div");
        colour.classList.add("colour");
        colour.style.background = i["hex"];

        const test = document.createElement("div");
        test.classList.add("test");

        const name = document.createElement("p");
        name.innerText = i["name"];
        const theme = document.createElement("p");
        theme.innerText = "Theme: " + i["theme"];
        const role = document.createElement("p");
        role.innerText = "Role: " + i["role"];
        info.append(name, theme, role);



        const hex = document.createElement("p");
        hex.innerText = "Hex: " + i["hex"];
        const { r, g, b } = hexToRGB(i["hex"]);
        const rgbColour = document.createElement("p");
        rgbColour.innerText = `RGB(${r}, ${g}, ${b})`;
        space.append(hex, rgbColour);

        colourCard.append(info, space, description, colour, test);
        body.appendChild(colourCard);
        for (let j of data.colours) {
            if (i["hex"] != j["hex"]) {
                const testCard = document.createElement("div");
                testCard.classList.add("test-card");

                const testCol = document.createElement("div");
                testCol.classList.add("testCol");
                testCol.style.background = j["hex"];


                const { r: r1, g: g1, b: b1 } = hexToRGB(i["hex"]);
                const { r: r2, g: g2, b: b2 } = hexToRGB(j["hex"]);
                const t = contrastRatio(r1, g1, b1, r2, g2, b2);
                const newText = document.createElement("p");
                newText.innerHTML = t;

                testCard.append(testCol, newText);
                test.appendChild(testCard);
            }
        }
    }
</script>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        padding: 10em;
        display: flex;
        flex-wrap: wrap;
        gap: 1em;
        font-family: "Nunito", sans-serif;
        font-optical-sizing: auto;
        font-weight: 400;
        font-style: normal;
        font-size: 20px;
    }

    .colour-card {
        width: auto;
        min-width: 30em;
        border: 1px solid black;
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: 1fr 3fr 2fr auto;
        grid-template-areas:
            "colour colour"
            "info space"
            "description description"
            "test test";
    }

    .info {
        grid-area: info;
        padding: 1em;
    }

    .test {
        grid-area: test;
        display: flex;
    }

    .colour-space {
        grid-area: space;
        padding: 1em;
    }

    .description {
        grid-area: description;
        padding: 1em;
    }

    .colour {
        grid-area: colour;
    }

    .testCol {
        margin: .5em;
        min-width: 20px;
        min-height: 20px;
        border: 1px solid black;
    }

    .test-card {
        border: 1px solid black;
        display: grid;
        grid-template-columns: 1fr 2fr;
        padding-right: 1em;
    }
</style>

</html>